<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blueprints code compression</title>
<link rel="icon" href="https://i.ibb.co/Hp44999c/blueprint-book.png" type="image/png">
<style>
    @font-face {
      font-family: "Factorio";
      src: url("https://fonts.cdnfonts.com/s/19687/PressStart2P-Regular.woff") format("woff");
    }
    
    :root {
      --factorio-dark: #262626;
      --factorio-darker: #1a1a1a;
      --factorio-mid: #414141;
      --factorio-accent: #ff9d00;
      --factorio-accent-dark: #cc7d00;
      --factorio-text: #e9e9e9;
      --factorio-yellow: #ffd200;
      --factorio-blue: #5796c8;
      --factorio-red: #db2e20;
      --factorio-green: #8bdc48;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: "Factorio", monospace;
      background: var(--factorio-dark) url('https://i.ibb.co/39K7GFn6/nuclear-ground.png');     <!-- –§–û–ù -->
      color: var(--factorio-text);
      font-size: 12px;
      line-height: 1.5;
    }
    
    .container {
      max-width: 800px;
      margin: 20px auto;
      padding: 0 15px;
    }
    
    .factorio-frame {
      background-color: var(--factorio-mid);
      border: 3px solid #696969;
      border-radius: 0;
      position: relative;
      padding: 30px 20px 20px;
      margin-bottom: 30px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
    }
    
    .factorio-frame::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 20px;
      background-color: #696969;
    }
    
    .factorio-frame-title {
      position: absolute;
      top: 0;
      left: 12px;
      height: 20px;
      line-height: 20px;
      color: var(--factorio-text);
      font-size: 10px;
      text-transform: uppercase;
      z-index: 1;
    }
    
    .blueprint-book {
      display: flex;
      background-color: var(--factorio-darker);
      border: 2px solid #555;
      padding: 5px;
      margin-bottom: 20px;
      position: relative;
    }
    
    .blueprint-book-icon {
      flex: 0 0 42px;
      height: 42px;
      background-image: url('https://i.ibb.co/Lf1C9DF/blueprint1.png');   <!-- –ê–≤–∞ -->
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      margin-right: 10px;
    }
    
    .blueprint-book-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    
    .blueprint-book-title {
      font-size: 16px;
      color: var(--factorio-blue);
      margin-bottom: 5px;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
    }
    
    .blueprint-book-desc {
      font-size: 10px;
      color: #aaa;
    }
    
    .blueprint-panel {
      background-color: var(--factorio-darker);
      border: 2px solid #555;
      margin-bottom: 15px;
      position: relative;
    }
    
    .blueprint-header {
      background-color: #333;
      padding: 8px 12px;
      border-bottom: 2px solid #555;
      display: flex;
      align-items: center;
    }
    
    .blueprint-icon {
      width: 32px;
      height: 32px;
      background-image: url('https://i.ibb.co/d4Gxc5jW/blueprint2.png');   <!-- –ú–∞–ª–µ–Ω—å–Ω–∏–µ –∫–∞—Ä—Ç–∏–∫–Ω–∏ -->
      background-size: contain;
      background-repeat: no-repeat;
      margin-right: 10px;
    }
    
    .blueprint-title {
      color: var(--factorio-blue);
      font-size: 12px;
    }
    
    .blueprint-body {
      padding: 15px;
    }
    
    textarea {
      width: 100%;
      background-color: #111;
      color: var(--factorio-text);
      border: 2px solid #555;
      font-family: monospace;
      padding: 10px;
      resize: vertical;
      min-height: 100px;
      margin-bottom: 10px;
      font-size: 11px;
    }
    
    textarea:focus {
      outline: none;
      border-color: var(--factorio-blue);
    }
    
    .factorio-button {
      background-color: var(--factorio-mid);
      border: 2px solid #555;
      color: var(--factorio-text);
      padding: 8px 12px;
      font-family: "Factorio", monospace;
      font-size: 10px;
      cursor: pointer;
      margin-right: 5px;
      margin-bottom: 5px;
      text-transform: uppercase;
      box-shadow: inset 0 0 5px rgba(255, 255, 255, 0.1);
      position: relative;
      overflow: hidden;
      transition: background-color 0.2s;
    }
    
    .factorio-button:hover {
      background-color: #505050;
    }
    
    .factorio-button:active {
      background-color: #333;
      box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.3);
    }
    
    .factorio-button.green {
      background-color: #1c6c1c;
    }
    
    .factorio-button.green:hover {
      background-color: #227622;
    }
    
    .factorio-button.yellow {
      background-color: #8a7c00;
    }
    
    .factorio-button.yellow:hover {
      background-color: #a59400;
    }
    
    .factorio-button.red {
      background-color: #961a10;
    }
    
    .factorio-button.red:hover {
      background-color: #b22016;
    }
    
    .button-container {
      display: flex;
      flex-wrap: wrap;
    }
    
    .status {
      margin-top: 10px;
      padding: 10px;
      border: 2px solid #555;
      display: none;
      font-size: 10px;
    }
    
    .success {
      background-color: rgba(0, 128, 0, 0.2);
      border-color: #396;
      color: var(--factorio-green);
      display: block;
    }
    
    .error {
      background-color: rgba(128, 0, 0, 0.2);
      border-color: #933;
      color: var(--factorio-red);
      display: block;
    }
    
    .compression-stats {
      margin-top: 15px;
      font-size: 10px;
      color: #aaa;
      background-color: #222;
      padding: 10px;
      border: 1px solid #444;
      position: relative;
    }

    .header {
      text-align: center;
      margin-bottom: 20px;
    }
    
    .header h1 {
      font-size: 24px;
      color: var(--factorio-yellow);
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
      margin-bottom: 10px;
    }
    
    .header p {
      color: #aaa;
      font-size: 10px;
    }
    
    .icon-grid {
      position: absolute;
      top: 10px;
      right: -66px;
      display: grid;
      grid-template-columns: repeat(4, 24px);
      grid-gap: 2px;
    }
    
    .icon-box {
      width: 24px;
      height: 24px;
      background-color: #333;
      border: 1px solid #555;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      color: var(--factorio-text);
    }
    
    .footer {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 2px solid #555;
      display: flex;
      justify-content: space-between;
      font-size: 10px;
      color: #777;
    }
    
    .footer a {
      color: var(--factorio-blue);
      text-decoration: none;
    }
    
    .footer a:hover {
      text-decoration: underline;
    }

    .social-links {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      grid-gap: 8px;
    }

    .social-link {
      display: flex;
      align-items: center;
    }

    .social-icon {
      width: 16px;
      height: 16px;
      margin-right: 5px;
      filter: brightness(0.8);
    }

    .icon-inserter {
      font-size: 14px;
      color: var(--factorio-yellow);
      margin-right: 5px;
    }

    .factorio-tab {
      display: inline-block;
      padding: 5px 10px;
      background-color: #333;
      border: 2px solid #555;
      border-bottom: none;
      margin-right: 2px;
      position: relative;
      top: 2px;
      cursor: pointer;
      font-size: 10px;
    }

    .factorio-tab.active {
      background-color: var(--factorio-darker);
      border-bottom: 2px solid var(--factorio-darker);
    }

    .tips {
      background-color: rgba(255, 210, 0, 0.1);
      border: 1px solid #886a00;
      padding: 10px;
      margin-top: 15px;
      font-size: 9px;
    }

    .tips h3 {
      color: var(--factorio-yellow);
      margin-bottom: 5px;
    }

    .tips ul {
      padding-left: 20px;
	  color: var(--factorio-yellow);
    }

    .tips li {
      margin-bottom: 3px;
    }
</style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>FCT BLUEPRINTS CODE COMPRESSION</h1>
    </div>
    
    <div class="blueprint-book">
      <div class="blueprint-book-icon"></div>
      <div class="blueprint-book-content">
        <div class="blueprint-book-title">–û–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä —á–µ—Ä—Ç–µ–∂–µ–π –¥–ª—è Factorio</div>
        <div class="blueprint-book-desc">–°–∂–∏–º–∞–π—Ç–µ —á–µ—Ä—Ç–µ–∂–∏ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤ Steam</div>
      </div>
      <div class="icon-grid">
        <div class="icon-box">‚úñ</div>
      </div>
    </div>
    
    <div class="factorio-frame">
      <div class="factorio-frame-title">–ö–û–ú–ü–†–ï–°–°–û–† –ß–ï–†–¢–ï–ñ–ï–ô</div>
      
      <div class="blueprint-panel">
        <div class="blueprint-header">
          <div class="blueprint-icon"></div>
          <div class="blueprint-title">–û–†–ò–ì–ò–ù–ê–õ–¨–ù–´–ô –ß–ï–†–¢–ï–ñ</div>
        </div>
        <div class="blueprint-body">
          <textarea id="originalBlueprint" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É —á–µ—Ä—Ç–µ–∂–∞ –∑–¥–µ—Å—å...">0eNpFjUsKwjAQhq8Ssq5WrArNVvAE7kRKq4MG+6KJIhTBx9KFZ9ATFLUqgnqFyY0c3ZRZ/Mw33/DnPAjnkGYy1l6QJDMu8oooLgZDi0sNERcVrv1Fi4d+ACEd8ISl2ZgtvvGMhTkwfOILH3jBgqwxqFEmUy2T+OceybrjFQtS3gw/Zo0PCqJXmpLWG72XrA8hTDI/Yngxa7Mj42P2grGp1qkStq3rEdi9bj9RWsZU44+0XIAn4zEsuWhYfAGZ+ne2O0235boUjut0nNXqC7lob2Q=</textarea>
          <div class="button-container">
            <button class="factorio-button green" onclick="compressBlueprint()">–°–ñ–ê–¢–¨ –ß–ï–†–¢–ï–ñ</button>
            <button class="factorio-button red" onclick="clearFields()">–û–ß–ò–°–¢–ò–¢–¨</button>
          </div>
        </div>
      </div>
      
      <div class="blueprint-panel">
        <div class="blueprint-header">
          <div class="blueprint-icon"></div>
          <div class="blueprint-title">–°–ñ–ê–¢–´–ô –ß–ï–†–¢–ï–ñ</div>
        </div>
        <div class="blueprint-body">
          <textarea id="compressedBlueprint" readonly placeholder="–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è —Å–∂–∞—Ç—ã–π –∫–æ–¥ —á–µ—Ä—Ç–µ–∂–∞..."></textarea>
          <div class="button-container">
            <button class="factorio-button yellow" onclick="copyCompressedBlueprint()">–°–ö–û–ü–ò–†–û–í–ê–¢–¨</button>
            <button class="factorio-button" onclick="decompressBlueprint()">–ü–†–û–í–ï–†–ò–¢–¨</button>
          </div>
          <div id="status" class="status"></div>
          <div id="compressionStats" class="compression-stats"></div>
          
          <div class="tips">
            <h3><span class="icon-inserter">üîß</span> –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:</h3>
            <ul>
			  <li>–î–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ø–µ—Ä–µ–¥–µ –∏—Å–ø–æ–ª—å–∑–≤–∞–Ω–∏–µ–º</li>
              <li>–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ª—É—á—à–µ –≤—Å–µ–≥–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö —á–µ—Ä—Ç–µ–∂–µ–π</li>
              <li>–ú–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –æ—á–µ–Ω—å —Å—Ç–∞—Ä—ã–º–∏ –∏–ª–∏ –Ω–æ–≤–µ–º–∏ –≤–µ—Ä—Å–∏—è–º–∏</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    
    <div class="footer">
	    <p>üêû <a href="https://www.youtube.com/@FCT-Ostin" target="_blank">YouTube</a></p>
		<p>üíô <a href="https://t.me/FCTostin" target="_blank">Telegram</a></p>
        <p>üéÆ <a href="https://steamcommunity.com/groups/FCTgroup" target="_blank">Steam Group</a></p>
        <p>üïπ <a href="https://www.patreon.com/c/OstinFCT" target="_blank">Patreon</a></p>
        <p>ü™ê <a href="https://boosty.to/ostinfct" target="_blank">Boosty</a></p>
        <p>–°–æ–∑–¥–∞–Ω–æ –ø—Ä–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ –¢–µ–ª–µ–≥—Ä–∞–º —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ FCTostin</p>
      </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
  <script>
    function base64ToUint8Array(base64) {
      const binaryString = atob(base64);
      const len = binaryString.length;
      const bytes = new Uint8Array(len);
      for (let i = 0; i < len; i++) {
        bytes[i] = binaryString.charCodeAt(i);
      }
      return bytes;
    }

    function uint8ArrayToBase64(array) {
      return btoa(String.fromCharCode.apply(null, array));
    }

    function showStatus(message, isError = false) {
      const statusElement = document.getElementById('status');
      statusElement.textContent = message;
      statusElement.className = 'status ' + (isError ? 'error' : 'success');
      
      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
      setTimeout(() => {
        statusElement.className = 'status';
      }, 10000);
    }

    function updateCompressionStats(original, compressed) {
      const originalSize = original.length;
      const compressedSize = compressed.length;
      const savings = originalSize - compressedSize;
      const savingsPercent = Math.round((savings / originalSize) * 100);
      
      document.getElementById('compressionStats').textContent = 
        `üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê: ${originalSize} ‚Üí ${compressedSize} —Å–∏–º–≤–æ–ª–æ–≤ (—Å—ç–∫–æ–Ω–æ–º–ª–µ–Ω–æ ${savings} —Å–∏–º–≤–æ–ª–æ–≤, ${savingsPercent}%)`;
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ JSON —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
    function optimizeJsonStructure(json) {
      // –ï—Å–ª–∏ —ç—Ç–æ –º–∞—Å—Å–∏–≤, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç
      if (Array.isArray(json)) {
        return json.map(item => optimizeJsonStructure(item));
      }
      
      // –ï—Å–ª–∏ —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º –µ–≥–æ
      if (json && typeof json === 'object') {
        const result = {};
        
        // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–∞
        for (const key in json) {
          const value = json[key];
          
          // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã –∏ –æ–±—ä–µ–∫—Ç—ã
          if (Array.isArray(value) && value.length === 0) continue;
          if (value && typeof value === 'object' && !Array.isArray(value) && Object.keys(value).length === 0) continue;
          
          // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø–æ–ª—è—Ö
          if (key === 'direction' && value === 0) continue;
          if (key === 'enabled' && value === true) continue;
          if (key === 'connections' && Object.keys(value).length === 0) continue;
          
          // –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –∏ –º–∞—Å—Å–∏–≤—ã
          result[key] = optimizeJsonStructure(value);
        }
        
        return result;
      }
      
      // –î–ª—è –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ
      return json;
    }

    function compressBlueprint() {
      const originalCode = document.getElementById('originalBlueprint').value.trim();
      
      if (!originalCode) {
        showStatus('–û–®–ò–ë–ö–ê: –í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ —á–µ—Ä—Ç–µ–∂–∞!', true);
        return;
      }
      
      try {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ª–∏ –∫–æ–¥ —Å "0" (—Ñ–æ—Ä–º–∞—Ç Factorio)
        if (!originalCode.startsWith('0')) {
          showStatus('–û–®–ò–ë–ö–ê: –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —á–µ—Ä—Ç–µ–∂–∞. –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å "0"', true);
          return;
        }
        
        // –ò–∑–≤–ª–µ–∫–∞–µ–º base64 –±–µ–∑ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ "0"
        const base64 = originalCode.slice(1);
        
        // –î–µ–∫–æ–¥–∏—Ä—É–µ–º base64 –≤ –±–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        const byteArray = base64ToUint8Array(base64);
        
        // –†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º —Å–∂–∞—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ
        const jsonString = pako.inflate(byteArray, { to: 'string' });
        
        // –ü–∞—Ä—Å–∏–º JSON
        const json = JSON.parse(jsonString);
        
        // –ì–ª—É–±–æ–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã JSON
        const optimizedJsonStructure = optimizeJsonStructure(json);
        
        // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ –∫–æ–º–ø–∞–∫—Ç–Ω—É—é —Å—Ç—Ä–æ–∫—É JSON –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤
        const optimizedJsonString = JSON.stringify(optimizedJsonStructure);
        
        // –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ —Å–∂–∞—Ç–∏—è –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏
        let bestCompressedData = null;
        let minSize = Infinity;
        
        // –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —Å–∂–∞—Ç–∏—è
        for (let level = 6; level <= 9; level++) {
          for (let memLevel = 8; memLevel <= 9; memLevel++) {
            const options = { 
              level: level,           // –£—Ä–æ–≤–µ–Ω—å —Å–∂–∞—Ç–∏—è (0-9)
              memLevel: memLevel,     // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ (1-9)
              strategy: 0             // –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Å–∂–∞—Ç–∏—è (0 = —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è)
            };
            
            const compressed = pako.deflate(optimizedJsonString, options);
            const base64Result = uint8ArrayToBase64(compressed);
            
            if (base64Result.length < minSize) {
              minSize = base64Result.length;
              bestCompressedData = compressed;
            }
          }
        }
        
        // –ö–æ–¥–∏—Ä—É–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ base64 —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ª—É—á—à–µ–≥–æ —Å–∂–∞—Ç–∏—è
        const compressedBase64 = uint8ArrayToBase64(bestCompressedData);
        
        // –î–æ–±–∞–≤–ª—è–µ–º "0" –æ–±—Ä–∞—Ç–Ω–æ –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        const compressedBlueprint = '0' + compressedBase64;
        document.getElementById('compressedBlueprint').value = compressedBlueprint;
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–∂–∞—Ç–∏—è
        updateCompressionStats(originalCode, compressedBlueprint);
        
        showStatus('‚úÖ –ß–µ—Ä—Ç–µ–∂ —É—Å–ø–µ—à–Ω–æ —Å–∂–∞—Ç –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω!');
      } catch (e) {
        showStatus('‚ùå –û–®–ò–ë–ö–ê: ' + e.message, true);
      }
    }

    function decompressBlueprint() {
      const compressedCode = document.getElementById('compressedBlueprint').value.trim();
      
      if (!compressedCode) {
        showStatus('–û–®–ò–ë–ö–ê: –ù–µ—Ç —Å–∂–∞—Ç–æ–≥–æ —á–µ—Ä—Ç–µ–∂–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏!', true);
        return;
      }
      
      try {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–∂–∞—Ç–æ–≥–æ —á–µ—Ä—Ç–µ–∂–∞
        if (!compressedCode.startsWith('0')) {
          showStatus('–û–®–ò–ë–ö–ê: –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —á–µ—Ä—Ç–µ–∂–∞. –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å "0"', true);
          return;
        }
        
        const base64 = compressedCode.slice(1);
        const byteArray = base64ToUint8Array(base64);
        const jsonString = pako.inflate(byteArray, { to: 'string' });
        const json = JSON.parse(jsonString);
        
        // –ï—Å–ª–∏ –≤—Å–µ –ø—Ä–æ—à–ª–æ –±–µ–∑ –æ—à–∏–±–æ–∫, —Ç–æ —á–µ—Ä—Ç–µ–∂ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–µ–Ω
        showStatus('‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞! –ß–µ—Ä—Ç–µ–∂ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–µ–Ω.');
      } catch (e) {
        showStatus('‚ùå –û–®–ò–ë–ö–ê –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ: ' + e.message, true);
      }
    }

    function copyCompressedBlueprint() {
      const compressedField = document.getElementById('compressedBlueprint');
      compressedField.select();
      document.execCommand('copy');
      showStatus('‚úÖ –ß–µ—Ä—Ç–µ–∂ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
    }

    function clearFields() {
      document.getElementById('originalBlueprint').value = '';
      document.getElementById('compressedBlueprint').value = '';
      document.getElementById('compressionStats').textContent = '';
      document.getElementById('status').className = 'status';
    }
  </script>
</body>
</html>
